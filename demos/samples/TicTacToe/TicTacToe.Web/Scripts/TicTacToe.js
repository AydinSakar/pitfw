registerNamespace("TicTacToe");registerNamespace("TicTacToe.App");registerNamespace("TicTacToe.Game");DOM.domReady(function(){return TicTacToe.Game.drawBoard();});registerNamespace("TicTacToe.Game.State");TicTacToe.Game.State=function(){this.Tag=0;this.IsNone=false;this.IsO=false;this.IsX=false;};TicTacToe.Game.State.X=function(){};TicTacToe.Game.State.X.prototype=new TicTacToe.Game.State();TicTacToe.Game.State.X.prototype.equality=function(compareTo){var result=true;return result;};TicTacToe.Game.State.O=function(){};TicTacToe.Game.State.O.prototype=new TicTacToe.Game.State();TicTacToe.Game.State.O.prototype.equality=function(compareTo){var result=true;return result;};TicTacToe.Game.State.None=function(){};TicTacToe.Game.State.None.prototype=new TicTacToe.Game.State();TicTacToe.Game.State.None.prototype.equality=function(compareTo){var result=true;return result;};TicTacToe.Game.State.prototype.get_Tag=function(){return this.Tag;};TicTacToe.Game.State.prototype.get_IsNone=function(){return this instanceof TicTacToe.Game.State.None;};TicTacToe.Game.State.prototype.get_IsO=function(){return this instanceof TicTacToe.Game.State.O;};TicTacToe.Game.State.prototype.get_IsX=function(){return this instanceof TicTacToe.Game.State.X;};TicTacToe.Game.get_wins=[{Item1 : 0,Item2 : 1,Item3 : 2},{Item1 : 3,Item2 : 4,Item3 : 5},{Item1 : 6,Item2 : 7,Item3 : 8},{Item1 : 0,Item2 : 3,Item3 : 6},{Item1 : 1,Item2 : 4,Item3 : 7},{Item1 : 2,Item2 : 5,Item3 : 8},{Item1 : 0,Item2 : 4,Item3 : 8},{Item1 : 2,Item2 : 4,Item3 : 6}];TicTacToe.Game.get_gameState=[new TicTacToe.Game.State.None(),new TicTacToe.Game.State.None(),new TicTacToe.Game.State.None(),new TicTacToe.Game.State.None(),new TicTacToe.Game.State.None(),new TicTacToe.Game.State.None(),new TicTacToe.Game.State.None(),new TicTacToe.Game.State.None(),new TicTacToe.Game.State.None()];TicTacToe.Game.get_lstState=new TicTacToe.Game.State.None();TicTacToe.Game.resetBoard=function(){var tab=Pit.FSharp.Core.Operators.op_PipeRight(document.getElementsByTagName("table")[0])(function(arg00){return arg00;});for(var i=0; i <= 2; i++){(function(thisObject,i){for(var j=0; j <= 2; j++){(function(thisObject,j){tab.rows[i].cells[j].innerHTML='';TicTacToe.Game.get_gameState[((i * 3) + j)]=new TicTacToe.Game.State.None();})(thisObject,j);}})(this,i);};return TicTacToe.Game.get_lstState=new TicTacToe.Game.State.None();};TicTacToe.Game.checkWinner=function(tupledArg){var i=tupledArg.Item1;var j=tupledArg.Item2;var index=((i * 3) + j);Pit.FSharp.Core.Operators.op_PipeRight(Pit.FSharp.Core.Operators.op_PipeRight(Pit.FSharp.Core.Operators.op_PipeRight(TicTacToe.Game.get_wins)(function(array){return Pit.FSharp.Collections.ArrayModule.Filter(function(tupledArg1){var a=tupledArg1.Item1;var b=tupledArg1.Item2;var c=tupledArg1.Item3;return (function(thisObject){if ((function(thisObject){if ((function(thisObject){if (a == index){return true;} else {return b == index;}})(thisObject)){return true;} else {return c == index;}})(thisObject)){return true;} else {return false;}})(this);})(array);}))(function(array){return Pit.FSharp.Collections.ArrayModule.Map(function(tupledArg1){var d=tupledArg1.Item1;var e=tupledArg1.Item2;var f=tupledArg1.Item3;return {Item1 : TicTacToe.Game.get_gameState[d],Item2 : TicTacToe.Game.get_gameState[e],Item3 : TicTacToe.Game.get_gameState[f]};})(array);}))(function(array){return Pit.FSharp.Collections.ArrayModule.Iterate(function(tupledArg1){var g=tupledArg1.Item1;var h=tupledArg1.Item2;var i1=tupledArg1.Item3;var matchValue={Item1 : g,Item2 : h,Item3 : i1};return (function(thisObject){if (matchValue.Item1 instanceof TicTacToe.Game.State.O){return (function(thisObject){if (matchValue.Item2 instanceof TicTacToe.Game.State.O){return (function(thisObject){if (matchValue.Item3 instanceof TicTacToe.Game.State.O){alert("O is Winner");return TicTacToe.Game.resetBoard();} else {return null;}})(thisObject);} else {return null;}})(thisObject);} else {return (function(thisObject){if (matchValue.Item1 instanceof TicTacToe.Game.State.X){return (function(thisObject){if (matchValue.Item2 instanceof TicTacToe.Game.State.X){return (function(thisObject){if (matchValue.Item3 instanceof TicTacToe.Game.State.X){alert("X is Winner");return TicTacToe.Game.resetBoard();} else {return null;}})(thisObject);} else {return null;}})(thisObject);} else {return null;}})(thisObject);}})(this);})(array);});var l=Pit.FSharp.Core.Operators.op_PipeRight(Pit.FSharp.Core.Operators.op_PipeRight(TicTacToe.Game.get_gameState)(function(array){return Pit.FSharp.Collections.ArrayModule.Filter(function(k){return k.equality(new TicTacToe.Game.State.None());})(array);}))(function(array){return Pit.FSharp.Collections.ArrayModule.Length(array);});return (function(thisObject){if (l == 0){alert("Match draw");return TicTacToe.Game.resetBoard();} else {return null;}})(this);};TicTacToe.Game.hook=function(td){return function(i){return function(j){return Pit.FSharp.Core.Operators.op_PipeRight(Pit.FSharp.Core.Operators.op_PipeRight(td)(function(el){return Pit.Dom.Event.click(el);}))(function(sourceEvent){return Pit.FSharp.Control.EventModule.Add(function(_arg1){var matchValue=TicTacToe.Game.get_gameState[((i * 3) + j)];return (function(thisObject){if (matchValue instanceof TicTacToe.Game.State.None){(function(thisObject){if (TicTacToe.Game.get_lstState instanceof TicTacToe.Game.State.X){TicTacToe.Game.get_gameState[((i * 3) + j)]=new TicTacToe.Game.State.O();td.innerHTML="O";return TicTacToe.Game.get_lstState=new TicTacToe.Game.State.O();} else {return (function(thisObject){if (TicTacToe.Game.get_lstState instanceof TicTacToe.Game.State.O){TicTacToe.Game.get_gameState[((i * 3) + j)]=new TicTacToe.Game.State.X();td.innerHTML="X";return TicTacToe.Game.get_lstState=new TicTacToe.Game.State.X();} else {TicTacToe.Game.get_gameState[((i * 3) + j)]=new TicTacToe.Game.State.O();td.innerHTML="O";return TicTacToe.Game.get_lstState=new TicTacToe.Game.State.O();}})(thisObject);}})(thisObject);return TicTacToe.Game.checkWinner({Item1 : i,Item2 : j});} else {return alert("Click on another cell");}})(this);})(sourceEvent);});};};};TicTacToe.Game.drawBoard=function(){var div=document.getElementById("ttt");var tab=Pit.FSharp.Core.Operators.op_PipeRight(document.createElement("table"))(function(arg00){return arg00;});tab.rules="all";for(var i=0; i <= 2; i++){(function(thisObject,i){var tr=document.createElement("tr");tr.setAttribute("height","200");for(var j=0; j <= 2; j++){(function(thisObject,j){var td=document.createElement("td");td.setAttribute("width","200");td.setAttribute("align","center");td.setAttribute("valign","center");TicTacToe.Game.hook(td)(i)(j);tr.appendChild(td);})(thisObject,j);};tab.appendChild(tr);})(this,i);};return div.appendChild(tab);};TicTacToe.Game.State.Tags = (function(){function Tags(){}return Tags;})();