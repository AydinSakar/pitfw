registerNamespace("Pit.Chart.App");registerNamespace("Pit.Chart.Basic");registerNamespace("Pit.Chart.Colors");DOM.domReady(function(){var xvalues=["Jan","Feb","Mar","Apr","May","Jun"];var yvalues=[12,28,18,34,40,17];var canvas=Pit.FSharp.Core.Operators.op_PipeRight(document.getElementById("pie"))(function(arg00){return arg00;});var values=[0.2,0.3,0.1,0.5];Pit.FSharp.Core.Operators.op_PipeRight(Pit.FSharp.Core.Operators.op_PipeRight(Pit.Chart.Basic.Pie.init(canvas))(function(t){return Pit.Chart.Basic.Pie.setDataset(values)(t);}))(function(t){return Pit.Chart.Basic.Pie.draw(t);});var canvas1=Pit.FSharp.Core.Operators.op_PipeRight(document.getElementById("bar"))(function(arg00){return arg00;});var values1=[10,20,30,50];Pit.FSharp.Core.Operators.op_PipeRight(Pit.Chart.Basic.Bar.init(canvas1))(function(t){return Pit.Chart.Basic.Bar.draw(xvalues)(yvalues)(Pit.Chart.Colors.get(xvalues.get_Length()))(t);});var canvas2=Pit.FSharp.Core.Operators.op_PipeRight(document.getElementById("line"))(function(arg00){return arg00;});return Pit.FSharp.Core.Operators.op_PipeRight(Pit.Chart.Basic.Line.init(canvas2))(function(t){return Pit.Chart.Basic.Line.draw(xvalues)(yvalues)(t);});});registerNamespace("Pit.Chart.Basic.Bar");registerNamespace("Pit.Chart.Basic.Line");registerNamespace("Pit.Chart.Basic.Pie");registerNamespace("Pit.Chart");Pit.Chart.Basic.Bar.settings = (function(){function settings(canvas,context,height,width,axisLine,axisColor,xpadding,ypadding,xvalues,yvalues,colors,textColor,headLineFont,labelFont,barLabelFont){this.canvas=canvas;this.context=context;this.height=height;this.width=width;this.axisLine=axisLine;this.axisColor=axisColor;this.xpadding=xpadding;this.ypadding=ypadding;this.xvalues=xvalues;this.yvalues=yvalues;this.colors=colors;this.textColor=textColor;this.headLineFont=headLineFont;this.labelFont=labelFont;this.barLabelFont=barLabelFont;}settings.prototype.get_canvas=function(){return this.canvas;};settings.prototype.get_context=function(){return this.context;};settings.prototype.get_height=function(){return this.height;};settings.prototype.get_width=function(){return this.width;};settings.prototype.get_axisLine=function(){return this.axisLine;};settings.prototype.get_axisColor=function(){return this.axisColor;};settings.prototype.get_xpadding=function(){return this.xpadding;};settings.prototype.get_ypadding=function(){return this.ypadding;};settings.prototype.get_xvalues=function(){return this.xvalues;};settings.prototype.get_yvalues=function(){return this.yvalues;};settings.prototype.get_colors=function(){return this.colors;};settings.prototype.get_textColor=function(){return this.textColor;};settings.prototype.get_headLineFont=function(){return this.headLineFont;};settings.prototype.get_labelFont=function(){return this.labelFont;};settings.prototype.get_barLabelFont=function(){return this.barLabelFont;};settings.prototype.get_barMaxHeight=function(){return (this.get_height() - (this.get_ypadding() * 2));};settings.prototype.get_barWidth=function(){return ((this.get_width() - ((Pit.FSharp.Core.Operators.ToDouble(this.get_yvalues().get_Length()) + 2) * this.get_xpadding())) / Pit.FSharp.Core.Operators.op_PipeRight(this.get_yvalues().get_Length())(function(value){return Pit.FSharp.Core.Operators.ToDouble(value);}));};settings.prototype.get_ybarStartPoint=function(){return (this.get_height() - this.get_ypadding());};settings.prototype.get_ylabelStartPoint=function(){return (this.get_ybarStartPoint() + 5);};return settings;})();Pit.Chart.Basic.Bar.init=function(canvas){return new Pit.Chart.Basic.Bar.settings(canvas,canvas.getContext("2d"),canvas.height,canvas.width,1,"black",10,25,[],[],[],"rgb(0,0,0)","14px sans-serif","11px sans-serif","10px sans-serif");};Pit.Chart.Basic.Bar.setDataset=function(xvalues){return function(yvalues){return function(colors){return function(t){return new Pit.Chart.Basic.Bar.settings(t.get_canvas(),t.get_context(),t.get_height(),t.get_width(),t.get_axisLine(),t.get_axisColor(),t.get_xpadding(),t.get_ypadding(),xvalues,yvalues,colors,t.get_textColor(),t.get_headLineFont(),t.get_labelFont(),t.get_barLabelFont());};};};};Pit.Chart.Basic.Bar.draw=function(xvalues){return function(yvalues){return function(colors){return function(t){var t1=Pit.Chart.Basic.Bar.setDataset(xvalues)(yvalues)(colors)(t);var ctx=t1.get_context();ctx.fillStyle=t1.get_textColor();ctx.shadowOffsetX=3;ctx.shadowOffsetY=3;ctx.shadowBlur=10;ctx.shadowColor="rgba(64, 64, 64, 0.5)";ctx.lineWidth=t1.get_axisLine();ctx.strokeStyle=t1.get_axisColor();ctx.beginPath();ctx.moveTo(t1.get_xpadding(),0);ctx.lineTo(t1.get_xpadding(),(t1.get_height() - t1.get_ypadding()));ctx.lineTo(t1.get_width(),(t1.get_height() - t1.get_ypadding()));ctx.stroke();ctx.save();var ymax=Pit.FSharp.Core.Operators.op_PipeRight(t1.get_yvalues())(function(array){return Pit.FSharp.Collections.ArrayModule.Max(array);});for(var i=0; i <= (t1.get_yvalues().get_Length() - 1); i++){(function(thisObject,i){var label=t1.get_xvalues()[i];var value=t1.get_yvalues()[i];var color=t1.get_colors()[(i % t1.get_colors().get_Length())];var barHeight=((value / ymax) * t1.get_barMaxHeight());var xmiddleOfBar=((((t1.get_barWidth() / 2) + t1.get_xpadding()) + (t1.get_xpadding() * Pit.FSharp.Core.Operators.ToDouble(i))) + (t1.get_barWidth() * Pit.FSharp.Core.Operators.ToDouble(i)));var ymiddleOfBar=(t1.get_ybarStartPoint() - (barHeight / 2));ctx.fillStyle=t1.get_textColor();ctx.font=t1.get_labelFont();ctx.textBaseline="top";ctx.textAlign="center";ctx.fillText(label,xmiddleOfBar,t1.get_ylabelStartPoint());ctx.fillStyle=color;ctx.fillRect(((t1.get_xpadding() + (t1.get_xpadding() * Pit.FSharp.Core.Operators.ToDouble(i))) + (t1.get_barWidth() * Pit.FSharp.Core.Operators.ToDouble(i))),t1.get_ybarStartPoint(),t1.get_barWidth(),(barHeight * -1));ctx.fillStyle=t1.get_textColor();ctx.font=t1.get_barLabelFont();ctx.textBaseline="top";ctx.textAlign="center";ctx.fillText(value.ToString(),xmiddleOfBar,ymiddleOfBar);})(this,i);};return ctx.restore();};};};};registerNamespace("Pit.Chart");Pit.Chart.Basic.Line.settings = (function(){function settings(canvas,context,height,width,xvalues,yvalues,xpadding,ypadding,lineWidth,axisColor,lineColor,font,xTextAlign,yTextAlign,yTextBaseline,dotColor){this.canvas=canvas;this.context=context;this.height=height;this.width=width;this.xvalues=xvalues;this.yvalues=yvalues;this.xpadding=xpadding;this.ypadding=ypadding;this.lineWidth=lineWidth;this.axisColor=axisColor;this.lineColor=lineColor;this.font=font;this.xTextAlign=xTextAlign;this.yTextAlign=yTextAlign;this.yTextBaseline=yTextBaseline;this.dotColor=dotColor;}settings.prototype.GetXPixel=function(v){return ((((this.get_width() - this.get_xpadding()) / Pit.FSharp.Core.Operators.ToDouble(this.get_xvalues().get_Length())) * v) + (this.get_xpadding() * 1.5));};settings.prototype.GetYPixel=function(tupledArg){var v=tupledArg.Item1;var ymax=tupledArg.Item2;return ((this.get_height() - (((this.get_height() - this.get_ypadding()) / ymax) * v)) - this.get_ypadding());};settings.prototype.get_canvas=function(){return this.canvas;};settings.prototype.get_context=function(){return this.context;};settings.prototype.get_height=function(){return this.height;};settings.prototype.get_width=function(){return this.width;};settings.prototype.get_xvalues=function(){return this.xvalues;};settings.prototype.get_yvalues=function(){return this.yvalues;};settings.prototype.get_xpadding=function(){return this.xpadding;};settings.prototype.get_ypadding=function(){return this.ypadding;};settings.prototype.get_lineWidth=function(){return this.lineWidth;};settings.prototype.get_axisColor=function(){return this.axisColor;};settings.prototype.get_lineColor=function(){return this.lineColor;};settings.prototype.get_font=function(){return this.font;};settings.prototype.get_xTextAlign=function(){return this.xTextAlign;};settings.prototype.get_yTextAlign=function(){return this.yTextAlign;};settings.prototype.get_yTextBaseline=function(){return this.yTextBaseline;};settings.prototype.get_dotColor=function(){return this.dotColor;};return settings;})();Pit.Chart.Basic.Line.init=function(canvas){return new Pit.Chart.Basic.Line.settings(canvas,canvas.getContext("2d"),canvas.height,canvas.width,[],[],20,20,2,"#333","#F00","italic 8pt sans-serif","center","right","middle","#333");};Pit.Chart.Basic.Line._draw=function(t){var ctx=t.get_context();ctx.lineWidth=t.get_lineWidth();ctx.strokeStyle=t.get_axisColor();ctx.font=t.get_font();ctx.textAlign=t.get_xTextAlign();ctx.beginPath();ctx.moveTo(t.get_xpadding(),0);ctx.lineTo(t.get_xpadding(),(t.get_height() - t.get_ypadding()));ctx.lineTo(t.get_width(),(t.get_height() - t.get_ypadding()));ctx.stroke();for(var i=0; i <= (t.get_xvalues().get_Length() - 1); i++){(function(thisObject,i){ctx.fillText(t.get_xvalues()[i],t.GetXPixel(Pit.FSharp.Core.Operators.ToDouble(i)),((t.get_height() - t.get_ypadding()) + 20))})(this,i);};ctx.textAlign=t.get_yTextAlign();ctx.textBaseline=t.get_yTextBaseline();var m=Pit.FSharp.Core.Operators.op_PipeRight(t.get_yvalues())(function(array){return Pit.FSharp.Collections.ArrayModule.Max(array);});var ymax=((m + 10) - (m % 10));var inputSequence=Pit.FSharp.Core.Operators.op_RangeStep(0)(10)(ymax);var enumerator=inputSequence.IEnumerable1_GetEnumerator();(function(thisObject){try {while (enumerator.IEnumerator_MoveNext()){var i=enumerator.IEnumerator1_get_Current();ctx.fillText(i.ToString(),(t.get_xpadding() - 10),t.GetYPixel({Item1 : i,Item2 : ymax}));}}finally {(function(thisObject){if (enumerator.containsInterface("__getIDisposable")){return enumerator.IDisposable_Dispose();} else {return null;}})(thisObject)}})(this);ctx.strokeStyle=t.get_lineColor();ctx.beginPath();ctx.moveTo(t.GetXPixel(0),t.GetYPixel({Item1 : t.get_yvalues()[0],Item2 : ymax}));for(var i=1; i <= (t.get_yvalues().get_Length() - 1); i++){(function(thisObject,i){ctx.lineTo(t.GetXPixel(Pit.FSharp.Core.Operators.ToDouble(i)),t.GetYPixel({Item1 : t.get_yvalues()[i],Item2 : ymax}))})(this,i);};ctx.stroke();ctx.fillStyle=t.get_dotColor();for(var i=0; i <= (t.get_yvalues().get_Length() - 1); i++){(function(thisObject,i){ctx.beginPath();ctx.arc(t.GetXPixel(Pit.FSharp.Core.Operators.ToDouble(i)),t.GetYPixel({Item1 : t.get_yvalues()[i],Item2 : ymax}),4,0,(Math.PI * 2),true);ctx.fill();})(this,i);};};Pit.Chart.Basic.Line.setDataset=function(xvalues){return function(yvalues){return function(t){return new Pit.Chart.Basic.Line.settings(t.get_canvas(),t.get_context(),t.get_height(),t.get_width(),xvalues,yvalues,t.get_xpadding(),t.get_ypadding(),t.get_lineWidth(),t.get_axisColor(),t.get_lineColor(),t.get_font(),t.get_xTextAlign(),t.get_yTextAlign(),t.get_yTextBaseline(),t.get_dotColor());};};};Pit.Chart.Basic.Line.draw=function(xvalues){return function(yvalues){return function(t){return Pit.FSharp.Core.Operators.op_PipeRight(Pit.Chart.Basic.Line.setDataset(xvalues)(yvalues)(t))(function(t1){return Pit.Chart.Basic.Line._draw(t1);});};};};Pit.Chart.Basic.Line.draw2=function(t){return function(t1){return Pit.Chart.Basic.Line._draw(t1);};};Pit.Chart.Basic.Pie.init=function(canvas){return {canvas : canvas,container : canvas.parentNode,context : canvas.getContext("2d"),height : canvas.height,width : canvas.width,labels : [],fontSize : 10,labelColor : "black",labelWidth : 50,values : [],padding : {left : 30,right : 20,top : 20,bottom : 30}};};Pit.Chart.Basic.Pie.setDataset=function(v){return function(t){return {canvas : t.canvas,container : t.container,context : t.context,height : t.height,width : t.width,labels : t.labels,fontSize : t.fontSize,labelColor : t.labelColor,labelWidth : t.labelWidth,values : v,padding : t.padding};};};Pit.Chart.Basic.Pie.calcPadding=function(t){return {Item1 : t.padding.left,Item2 : (t.width - t.padding.right),Item3 : t.padding.top,Item4 : (t.height - t.padding.bottom)};};Pit.Chart.Basic.Pie.createLabelText=function(labelText){return function(sliceMiddle){return function(labelx){return function(labely){return function(t){var label=document.createElement("div");label.innerHTML=labelText;label.style.position="absolute";label.style.zIndex=11;label.style.width=(t.labelWidth.ToString() + "px");label.style.fontSize=(t.fontSize.ToString() + "px");label.style.color=t.labelColor;var x=sliceMiddle;(function(){return (function(thisObject){var x=sliceMiddle;if (x <= 0.25){label.style.textAlign="left";label.style.verticalAlign="top";label.style.left=(labelx.ToString() + "px");return label.style.top=((labely - t.fontSize).ToString() + "px");} else {var x=sliceMiddle;return (function(){return (function(thisObject){var x=sliceMiddle;if ((function(thisObject){if (x > 0.25){return x <= 0.5;} else {return false;}})(thisObject)){label.style.textAlign="left";label.style.verticalAlign="bottom";label.style.left=(labelx.ToString() + "px");return label.style.top=(labely.ToString() + "px");} else {var x=sliceMiddle;return (function(){return (function(thisObject){var x=sliceMiddle;if ((function(thisObject){if (x > 0.5){return x <= 0.75;} else {return false;}})(thisObject)){label.style.textAlign="right";label.style.verticalAlign="bottom";label.style.left=((labelx - t.labelWidth).ToString() + "px");return label.style.top=(labely.ToString() + "px");} else {label.style.textAlign="right";label.style.verticalAlign="bottom";label.style.left=((labelx - t.labelWidth).ToString() + "px");return label.style.top=((labely - t.fontSize).ToString() + "px");};})(thisObject);})();};})(thisObject);})();};})(this);})();return label;};};};};};Pit.Chart.Basic.Pie.draw=function(t){var ctx=t.context;var values=t.values;var total=Pit.FSharp.Core.Operators.op_PipeRight(values)(function(array){return Pit.FSharp.Collections.ArrayModule.Sum(array);});var patternInput=Pit.Chart.Basic.Pie.calcPadding(t);var ymin=patternInput.Item3;var ymax=patternInput.Item4;var xmin=patternInput.Item1;var xmax=patternInput.Item2;var radius=(Pit.FSharp.Core.Operators.Min((ymax - ymin))((xmax - xmin)) / 2);var centerx=(((xmax - xmin) / 2) + xmin);var centery=(((ymax - ymin) / 2) + ymin);var colors=Pit.Chart.Colors.get(values.get_Length());var counter=0;ctx.save();for(var i=0; i <= (values.get_Length() - 1); i++){(function(thisObject,i){var frac=(values[i] / total);ctx.beginPath();ctx.moveTo(centerx,centery);ctx.arc(centerx,centery,radius,(((counter * Math.PI) * 2) - (Math.PI * 0.5)),((((counter + frac) * Math.PI) * 2) - (Math.PI * 0.5)),false);ctx.lineTo(centerx,centery);ctx.closePath();ctx.fillStyle=colors[i];ctx.fill();var sliceMiddle=(counter + (frac / 2));var labelx=(centerx + (Math.sin(((sliceMiddle * Math.PI) * 2)) * (radius + 10)));var labely=(centery - (Math.cos(((sliceMiddle * Math.PI) * 2)) * (radius + 10)));var labelText=values[i].ToString();var label=Pit.Chart.Basic.Pie.createLabelText(labelText)(sliceMiddle)(labelx)(labely)(t);t.container.appendChild(label);counter=(counter + frac);})(this,i);};return ctx.restore();};Pit.Chart.Colors.get_c=["#63AA00","#FBB340","#00AADE","#976290","#71C200","#FF8000"];Pit.Chart.Colors.get=function(count){var len=Pit.Chart.Colors.get_c.get_Length();return Pit.FSharp.Collections.ArrayModule.Initialize((count + 1))(function(i){return Pit.Chart.Colors.get_c[(i % len)];});};